!function(t){function e(r){if(i[r])return i[r].exports;var a=i[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.SurfacePlot=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(1),n=i(3),o=i(4),l=i(5),h=i(6),c=i(8),u=i(9),f=i(11),d=e.SurfacePlot=function(){function t(e,i){if(r(this,t),i.width<300||i.height<200)throw new Error("SurfacePlot 绘制区域的宽不能小于 300, 高不能小于 200");if(!e||!e.rows||0===e.rows.length)throw new Error("SurfacePlot 需要有效数组做为初始化参数");this.style=new l.SCStyle(i),this.renderer=new u.WebGLRenderer,this.renderer.setStyle(i.width,i.height,"margin:0px; position:absolute; z-index:0;"),this.gl=this.renderer.gl,this.style.canvasHeight=this.renderer.canvasHeight,this.style.canvasWidth=this.renderer.canvasWidth,this.domElementObj=new h.SCDomElement(this.style,i.title),this.domElement=this.domElementObj.panel,this.domElement.appendChild(this.renderer.canvas),this.dataSource=new s.SCDataSource(e,this.style),this.mvMatrix=f.Matrix4.identity();var a=-20,c=20;this.dataSource.isNeedSwapRowCol&&(a=-110);var d=0;this.dataSource.isNeedSwapRowCol?(d=2.5*Math.abs(this.dataSource.scaleStartX),d<420&&(d=420)):(d=2.5*Math.abs(this.dataSource.zFar),d<450&&(d=450));var v=-this.style.canvasHeight-d;if(f.Matrix4.translate(this.mvMatrix,[-30,-10,v]),f.Matrix4.rotate(this.mvMatrix,this.mvMatrix,c/180*Math.PI,[1,0,0]),f.Matrix4.rotate(this.mvMatrix,this.mvMatrix,a/180*Math.PI,[0,1,0]),this.style.usePerspective===!0?this.pMatrix=f.Matrix4.perspective(.25*Math.PI,this.style.canvasWidth/this.style.canvasHeight,.1,5e4):this.pMatrix=f.Matrix4.orthogonal(-this.renderer.canvasWidth,this.renderer.canvasWidth,-this.renderer.canvasHeight,this.renderer.canvasHeight,-5e3,5e3),this.initProgram(),this.surface=new n.SCSurface(this.renderer.gl,this.prg,this.dataSource),this.style.isNeedShowScale===!0){this.ruler=new o.SCRuler(this.renderer.gl,this.prg,this.dataSource);var g=f.Matrix4.multiplyMatrices(this.pMatrix,this.mvMatrix);this.domElementObj.showYLabels(this.ruler.yLabelList,g);var p=this.ruler.zLabelList,b=this.ruler.xLabelList;this.dataSource.isNeedSwapRowCol===!0&&(p=this.ruler.xLabelList,b=this.ruler.zLabelList),this.domElementObj.showZLabels(p,g),this.domElementObj.showXLabels(b,g)}this.draw()}return a(t,[{key:"initProgram",value:function(){this.prg=this.gl.makeProgram(c.pixelVS,c.pixelFS),null===this.prg?console.log("着色器加载失败"):(this.prg.setAttribLocations(["vertexPosition","vertexColor"]),this.prg.setUniformLocations(["pMatrix","mvMatrix"]),this.gl.uniformMatrix4fv(this.prg.mvMatrix,!1,this.mvMatrix),this.gl.uniformMatrix4fv(this.prg.pMatrix,!1,this.pMatrix))}},{key:"draw",value:function(){this.gl.viewport(0,0,this.renderer.canvasWidth,this.renderer.canvasHeight),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT);var t=this.style.rgbBackgroundColor;this.gl.clearColor(t[0],t[1],t[2],1),this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.ruler&&this.ruler.draw(),this.surface.draw()}}]),t}();window.SurfacePlot=d},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.SCDataSource=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(2);e.SCDataSource=function(){function t(e,i){r(this,t),this.colorGroup=this._colors(i.surfaceColors),this.style=i,this.drawWidth=i.drawWidth,this.drawHeight=i.drawHeight,this.dataArr=this._parseData(e),this.rowCount=this.rowHeaders.length,this._validateRowAndCol(this.rowCount),this.colCount=this.colHeaders.length,this._validateRowAndCol(this.colCount),this.isNeedSwapRowCol=!1,this.rowCount>this.colCount&&(this.isNeedSwapRowCol=!0),this.sampleRow=1,this.sampleCol=1;var a=2*window.devicePixelRatio,s=(this.isNeedSwapRowCol?this.drawWidth:this.drawHeight)/a,n=(this.isNeedSwapRowCol?this.drawHeight:this.drawWidth)/a;this.rowCount>s&&(this.sampleRow=Math.floor(this.rowCount/s)),this.colCount>n&&(this.sampleCol=Math.floor(this.colCount/n)),this.referenceLineCount=6,this.scaleLabels=[],this.dataScale=0,this.minValue=this.maxValue=parseFloat(this.dataArr[0][0]),this._validateDataType(this.minValue),this._formatData(this.dataArr)}return a(t,[{key:"_parseData",value:function(t){var e=t.rows,i=e.length;this.rowHeaders=[],this.colHeaders=t.colNameArr;for(var r=[],a=0;a<i;a++){var s=e[a];this.rowHeaders.push(s.rowName),r.push(s.data)}return r}},{key:"_colors",value:function(t){for(var e=[],i=0;i<t.length;i++)e.push(s.Color.hex2rgb(t[i]));return e}},{key:"_validateRowAndCol",value:function(t){if(t<2)throw new Error("SurfacePlot 至少需要 2 行 2 列数据 ")}},{key:"_validateDataType",value:function(t){if(void 0===t)throw new Error("SurfacePlot 需要的数据项必须是整数或浮点数")}},{key:"_formatData",value:function(t){this.dataSource=[];for(var e=0;e<this.rowCount;e+=this.sampleRow){for(var i=t[Math.floor(e)],r=[],a=0;a<this.colCount;a+=this.sampleCol){var s=parseFloat(i[Math.floor(a)]);this._validateDataType(s),r.push(s),s<this.minValue?this.minValue=s:s>this.maxValue&&(this.maxValue=s)}this.dataSource.push(r)}this.rowCount=this.dataSource.length,this.colCount=this.dataSource[0].length,this.colGap=parseFloat((this.drawWidth/(this._getColCount()-1)).toFixed(4)),this._calculateScaleLabel(),this._generateVertices()}},{key:"_getRowCount",value:function(){return this.isNeedSwapRowCol?this.colCount:this.rowCount}},{key:"_getColCount",value:function(){return this.isNeedSwapRowCol?this.rowCount:this.colCount}},{key:"_generateVertices",value:function(){this.edgeCrossoverArr=new Array,this.vertices=[],this.indices=[],this.colors=[],this.zFar=-(this.colGap*(this.rowCount-1)/2);for(var t=-this.zFar,e=this.rowCount-1,i=null,r=e;r>=0;r--){for(var a=this.scaleStartX-this.colGap,s=this.dataSource[r],n=(e-r)*this.colCount,o=0;o<this.colCount;o++){a+=this.colGap;var l=s[o];"number"!=typeof l&&console.log("invalid data: ",r,o,s),this.vertices.push(a,(l-this.scaleCenterY)*this.dataScale,t);var h=this._calculateVertexColor(l);if(this.colors.push(h[0],h[1],h[2]),this._subdividingSurface(r,o),n>0&&o>=1){var c=n+o,u=c-1,f=c-this.colCount,d=f-1;this.indices.push(d,f,u,f,c,u)}}i=s,t-=this.colGap}console.log(this.edgeCrossoverArr)}},{key:"_calculateVertexColor",value:function(t){for(var e=this.scaleLabels[0],i=1;i<this.scaleLabels.length;i++){var r=this.scaleLabels[i];if(t<=e&&t>=r)return this.colorGroup[i-1];e=r}return this.colorGroup[0]}},{key:"_calculateScaleLabel",value:function(){var t=this.maxValue-this.minValue,e=Math.abs(t)/(this.referenceLineCount-1).toFixed(2);e=this._calculateGap(e,1),this.scaleCenterY=this.minValue+t/2,this.scaleStartX=this.colCount/2*-this.colGap;var i=0;if(this.maxValue>0&&this.minValue<0){for(;i<this.maxValue;)i+=e,this.scaleLabels.unshift(i);i=0}else i=this.maxValue;for(this.scaleLabels.push(i);i>this.minValue;)i-=e,this.scaleLabels.push(i);this.dataScale=this.drawHeight/Math.abs(this.scaleLabels[0]-this.scaleLabels[this.scaleLabels.length-1])}},{key:"_calculateGap",value:function(t,e){if(t<e)return t;e*=10;var i=(t/e).toFixed(1)*e;return this._calculateGap(i,e)}},{key:"_calSubdividingLines",value:function(){this.lineVertices=[],this.lineIndices=[];for(var t=(this.rowCount-1,1);t<this.rowCount;t++)for(var e=0;e<this.colCount;e++);}},{key:"_subdividingSurface",value:function(t,e){var i=3*(this.colCount*t+e),r=[this.vertices[i],this.vertices[i+1],this.vertices[i+2]],a=[this.vertices[i-3],this.vertices[i-2],this.vertices[i-1]];if(0===t)e>0&&(this.edgeCrossoverArr[e-1]=this._calAllCrossoverPointInEdge(a,r));else{var s=i-3*this.colCount,n=[this.vertices[s],this.vertices[s+1],this.vertices[s+2]],o=t*(3*e+1)+2;this.edgeCrossoverArr[o]=this._calAllCrossoverPointInEdge(n,r),e>0&&(this.edgeCrossoverArr[o-1]=this._calAllCrossoverPointInEdge(a,r),this.edgeCrossoverArr[o-2]=this._calAllCrossoverPointInEdge(n,a))}}},{key:"_calAllCrossoverPointInEdge",value:function(t,e){for(var i=[],r=0;r<this.scaleLabels.length;r++){var a=this._calCrossoverPoint(this.scaleLabels[r]*this.dataScale,t,e);a&&i.push(a)}return i}},{key:"_calCrossoverPoint",value:function(t,e,i){if(t>=e[1]&&t<=i[1]||t<=e[1]&&t>=i[1]){var r=(t-e[1])/(i[1]-e[1]),a=(i[2]-e[2])*r;return[e[0],t,a]}return null}}]),t}(),function(){function t(e,i,a,s){r(this,t)}return a(t,[{key:"setNeighbor",value:function(){}}]),t}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();e.Color=function(){function t(){i(this,t)}return r(t,null,[{key:"hex2rgb",value:function(t){"string"==typeof t&&"#"===t.substr(0,1)&&(t="0x"+t.substr(1,t.length-1));var e=[];return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}}]),t}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();e.SCSurface=function(){function t(e,r,a){i(this,t),this.gl=e,this.prg=r,this.vertices=a.vertices,this.colorList=a.colors,this.indices=a.indices,this.vetexBuffer=e.createArrayBufferWithData(this.vertices),this.colorBuffer=e.createArrayBufferWithData(this.colorList),this.indexBufferList=[];for(var s=65535,n=a.indices.length,o=Math.ceil(n/s),l=0;l<o;l++){var h=l*s,c=h+s+1;c>n+1&&(c=n+1);var u=a.indices.slice(h,c),f=e.createElementBufferWithData(u);this.indexBufferList.push({buffer:f,length:c-h-1})}}return r(t,[{key:"draw",value:function(){var t=this;this.gl.enableVertexAttribArray(this.prg.vertexPosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vetexBuffer),this.gl.vertexAttribPointer(this.prg.vertexPosition,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.prg.vertexColor),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer),this.gl.vertexAttribPointer(this.prg.vertexColor,3,this.gl.FLOAT,!1,0,0),this.indexBufferList.forEach(function(e){t.gl.bindBuffer(t.gl.ELEMENT_ARRAY_BUFFER,e.buffer),t.gl.drawElements(t.gl.TRIANGLES,e.length,t.gl.UNSIGNED_SHORT,0)})}}]),t}(),function(){function t(e,r,a,s,n){i(this,t),this.gl=e,this.prg=r,this.vertices=a,this.colorList=s,this.indices=n,this.vetexBuffer=e.createArrayBufferWithData(this.vertices),this.indexBuffer=e.createElementBufferWithData(this.indices),this.colorBuffer=e.createArrayBufferWithData(this.colorList)}return r(t,[{key:"draw",value:function(){this.gl.enableVertexAttribArray(this.prg.vertexPosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vetexBuffer),this.gl.vertexAttribPointer(this.prg.vertexPosition,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.prg.vertexColor),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer),this.gl.vertexAttribPointer(this.prg.vertexColor,3,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.gl.drawElements(this.gl.TRIANGLES,this.indices.length,this.gl.UNSIGNED_SHORT,0)}}]),t}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=35*window.devicePixelRatio,s=10;e.SCRuler=function(){function t(e,r,a){i(this,t),this.gl=e,this.prg=r,this.dataSource=a,this.generateScale(),this.vetexBuffer=e.createArrayBufferWithData(this.vertices),this.indexBuffer=e.createElementBufferWithData(this.indices),this.colorBuffer=e.createArrayBufferWithData(this.colors)}return r(t,[{key:"generateScale",value:function(){this.vertices=[],this.indices=[],this.colors=[],this.yLabelList=[],this.xLabelList=[],this.zLabelList=[];var t=this.dataSource.scaleStartX;t=Math.abs(t)<35?-35:t;var e=this.dataSource.zFar;e=Math.abs(e)<35?-35:e;for(var i=0,r=void 0,a=void 0,s=void 0,n=void 0,o=0;o<this.dataSource.scaleLabels.length;o++){var l=this.dataSource.scaleLabels[o];r=(l-this.dataSource.scaleCenterY)*this.dataSource.dataScale,this.dataSource.isNeedSwapRowCol?(a=[-t,r,-e],s=[t,r,-e],n=[t,r,e]):(a=[t,r,-e],s=[t,r,e],n=[-t,r,e]),this.yLabelList.push({coord:a,label:l}),i=3*o,this._concatVertices(a,s,n,i)}i+=3,this.dataSource.isNeedSwapRowCol?(a=[-t,r,-e],s=[-t,r,e],n=[t,r,e]):(a=[-t,r,e],s=[-t,r,-e],n=[t,r,-e]),this._concatVertices(a,s,n,i),this._generateScaleX(t,r,-e,i+3)}},{key:"_generateScaleX",value:function(t,e,i,r){var a=this.dataSource.colGap*this.dataSource.colCount,n=a/45,o=i;this.dataSource.isNeedSwapRowCol===!0&&(o=-o-s);var l=1;n<this.dataSource.colHeaders.length&&(l=Math.ceil(this.dataSource.colHeaders.length/n));for(var h=this.dataSource.colHeaders.length/l,c=a/h,u=(this.dataSource.style.rgbScaleColor,0),f=0;f<h;f++){u=c*(f+.5);var d=[t+u,e,o+s],v=[t+u,e,o];this._concatVertices2(d,v,r),r+=2,this.xLabelList.push({coord:d,label:this.dataSource.colHeaders[f*l]})}this._generateScaleZ(-t,e,i,r)}},{key:"_generateScaleZ",value:function(t,e,i,r){var n=2*Math.abs(this.dataSource.zFar),o=n/a,l=1;o<this.dataSource.rowHeaders.length&&(l=Math.ceil(this.dataSource.rowHeaders.length/o));for(var h=Math.ceil(this.dataSource.rowHeaders.length/l),c=n/h,u=0,f=0;f<h;f++){u=c*(f+.5);var d=[t,e,i-u],v=[t+s,e,i-u];this._concatVertices2(d,v,r),r+=2,this.zLabelList.push({coord:v,label:this.dataSource.rowHeaders[f*l]})}}},{key:"_concatVertices",value:function(t,e,i,r){var a=this.dataSource.style.rgbScaleColor;this.vertices.push(t[0],t[1],t[2],e[0],e[1],e[2],i[0],i[1],i[2]),this.colors=this.colors.concat(a).concat(a).concat(a).concat(a),this.indices.push(r,r+1,r+1,r+2)}},{key:"_concatVertices2",value:function(t,e,i){var r=this.dataSource.style.rgbScaleColor;this.vertices.push(t[0],t[1],t[2],e[0],e[1],e[2]),this.colors=this.colors.concat(r).concat(r),this.indices.push(i,i+1)}},{key:"draw",value:function(){this.gl.lineWidth(2),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vetexBuffer),this.gl.vertexAttribPointer(this.prg.vertexPosition,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.prg.vertexPosition),this.gl.enableVertexAttribArray(this.prg.vertexColor),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer),this.gl.vertexAttribPointer(this.prg.vertexColor,3,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.gl.drawElements(this.gl.LINES,this.indices.length,this.gl.UNSIGNED_SHORT,0)}}]),t}()},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.SCStyle=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(2);e.SCStyle=function(){function t(e){r(this,t),this.width=e.width,this.height=e.height,this.usePerspective=void 0===e.usePerspective||e.usePerspective,this.fontColor=e.fontColor?e.fontColor:16448250,this.backgroundColor=e.backgroundColor?e.backgroundColor:3487029,this.rgbFontColor=s.Color.hex2rgb(this.fontColor),this.rgbBackgroundColor=s.Color.hex2rgb(this.backgroundColor),e.surfaceColors instanceof Array&&e.surfaceColors.length>6?this.surfaceColors=e.surfaceColors:this.surfaceColors=[2186385,7384904,3631549,16696630,10855845,15890740,6988761],this.isNeedShowScale=void 0===e.showScale||e.showScale,this.scaleColor=e.scaleColor?e.scaleColor:this.fontColor,this.rgbScaleColor=s.Color.hex2rgb(this.scaleColor),this.paddingLR=50*window.devicePixelRatio,this.paddingTop=40*window.devicePixelRatio,this.paddingBottom=50*window.devicePixelRatio,this._canvasWidth=0,this._canvasHeight=0,this.drawWidth=0,this.drawHeight=0}return a(t,[{key:"canvasWidth",set:function(t){this._canvasWidth=t,this.drawWidth=this._canvasWidth-2*this.paddingLR},get:function(){return this._canvasWidth}},{key:"canvasHeight",set:function(t){this._canvasHeight=t,this.drawHeight=this._canvasHeight-(this.paddingBottom+this.paddingTop)},get:function(){return this._canvasHeight}}]),t}()},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.SCDomElement=void 0;var a=function(){function t(t,e){var i=[],r=!0,a=!1,s=void 0;try{for(var n,o=t[Symbol.iterator]();!(r=(n=o.next()).done)&&(i.push(n.value),!e||i.length!==e);r=!0);}catch(l){a=!0,s=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(a)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(7);e.SCDomElement=function(){function t(e){var i=arguments.length<=1||void 0===arguments[1]?null:arguments[1];r(this,t),this.title=i,this.style=e,this.panel=this.createPanel(e),this.title&&this.createTitle(e),this.leftLabels=[],this.leftLabelsTN=[],this.createLabels()}return s(t,[{key:"createPanel",value:function(t){var e="position:relative;display:block; padding:0px; margin: 0px;  -webkit-tap-highlight-color:rgba(0, 0, 0, 0); -webkit-user-select: none; user-select: none; width:"+t.width+"px; height:"+t.height+"px; color: "+t.fontColor+"; background-color:"+t.backgroundColor;return this.createElement("div",e)}},{key:"createLabels",value:function(){for(var t=0;t<8;t++){var e=this.createSingleLabel(),i=a(e,2),r=i[0],s=i[1];this.leftLabels.push(r),this.leftLabelsTN.push(s)}}},{key:"createSingleLabel",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=this.createElement("div","position:absolute; text-align:right; font-size: 12px; display:None;\n         width: 100px; height:12px; line-height:12px; overflow:hidden; color:"+this.style.scaleColor+";\n         transform:rotate("+t+"deg); -ms-transform:rotate("+t+"deg); \t\n         -moz-transform:rotate("+t+"deg); \t\n         -webkit-transform:rotate("+t+"deg); -o-transform:rotate("+t+"deg)"),i=document.createTextNode("");return e.appendChild(i),this.panel.appendChild(e),[e,i]}},{key:"showYLabels",value:function(t,e){for(var i=0;i<t.length;i++){var r=this.leftLabels[i],a=this.leftLabelsTN[i],s=t[i].coord;n.Vector3.applyMatrix4(s,e),r.style.top=(1-s[1])*this.style.height/2-6+"px",r.style.left=(1+s[0])*this.style.width/2-110+"px",a.nodeValue=t[i].label,r.style.display="block"}}},{key:"showZLabels",value:function(t,e){for(var i=0;i<t.length;i++){var r=this.createSingleLabel(),s=a(r,2),o=s[0],l=s[1],h=t[i].coord;n.Vector3.applyMatrix4(h,e),o.style.top=(1-h[1])*this.style.height/2-6+"px",o.style.left=(1+h[0])*this.style.width/2+10+"px",o.style.textAlign="left",o.style.fontSize="8px",l.nodeValue=t[i].label,o.style.display="block"}}},{key:"showXLabels",value:function(t,e){for(var i=0;i<t.length;i++){var r=this.createSingleLabel(-90),s=a(r,2),o=s[0],l=s[1],h=t[i].coord;n.Vector3.applyMatrix4(h,e),o.style.top=(1-h[1])*this.style.height/2+45+"px",o.style.left=(1+h[0])*this.style.width/2-55+"px",o.style.fontSize="8px",l.nodeValue=t[i].label,o.style.display="block"}}},{key:"createTitle",value:function(t){var e="position:absolute; left:0px; top: 15px; margin:0px;font-size: 20px; font-style:bold;  width:"+t.width+"px; height:25px; text-align: center; z-index: 10",i=this.createElement("h3",e);i.innerHTML=this.title,this.panel.appendChild(i)}},{key:"createElement",value:function(t,e){var i=document.createElement(t);return i.setAttribute("style",e),i}}]),t}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();e.Vector3=function(){function t(){i(this,t)}return r(t,null,[{key:"applyMatrix4",value:function(t,e){var i=t[0],r=t[1],a=t[2],s=1;t[0]=e[0]*i+e[4]*r+e[8]*a+e[12]*s,t[1]=e[1]*i+e[5]*r+e[9]*a+e[13]*s,t[2]=e[2]*i+e[6]*r+e[10]*a+e[14]*s;var n=e[3]*i+e[7]*r+e[11]*a+e[15]*s;return t[0]=t[0]/n,t[1]=t[1]/n,t[2]=t[2]/n,t}}]),t}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.pixelVS="\nattribute vec3 vertexPosition;\nattribute vec3 vertexColor;\n\nuniform mat4 mvMatrix;\nuniform mat4 pMatrix;\n\nvarying vec3 color;\n\nvoid main(void) {\n  color = vertexColor;\n  gl_Position = pMatrix * mvMatrix * vec4(vertexPosition, 1.0);\n}\n",e.pixelFS="\nprecision mediump float;\n\nvarying vec3 color;\n\nvoid main(void) {\n  gl_FragColor = vec4(color, 0.95);\n}\n"},function(t,e,i){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLRenderer=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(10),o=r(n);e.WebGLRenderer=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],i=arguments.length<=1||void 0===arguments[1]?400:arguments[1],r=arguments.length<=2||void 0===arguments[2]?400:arguments[2];a(this,t),this.canvasWidth=0,this.canvasHeight=0,this.canvas=null,null!==e&&(this.canvas=document.getElementById(e)),null===this.canvas&&(this.canvas=document.createElement("canvas"),document.body.appendChild(this.canvas)),this.gl=this.getGLContext(),null===this.gl?this.isWebGLSuported=!1:(this.isWebGLSuported=!0,this.gl.createArrayBufferWithData=o.createArrayBufferWithData,this.gl.createElementBufferWithData=o.createElementBufferWithData,this.gl.createTextureWithData=o.createTextureWithData,this.gl.makeProgram=o.makeProgram),this.setStyle(i,r)}return s(t,[{key:"setStyle",value:function(){var t=arguments.length<=0||void 0===arguments[0]?400:arguments[0],e=arguments.length<=1||void 0===arguments[1]?400:arguments[1],i=arguments.length<=2||void 0===arguments[2]?null:arguments[2];null!=this.canvas&&(this.canvasWidth=t*window.devicePixelRatio,this.canvasHeight=e*window.devicePixelRatio,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,null===i?(this.canvas.style.width=t+"px",this.canvas.style.height=e+"px"):this.canvas.setAttribute("style","width:"+t+"px; height: "+e+"px; "+i+";"),this.canvas.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)",this.centerX=this.canvasWidth/2,this.centerY=this.canvasHeight/2)}},{key:"getGLContext",value:function(){for(var t=["webgl","experimental-webgl","webkit-3d","moz-webgl"],e=null,i=0;i<t.length&&!(e=this.canvas.getContext(t[i],{antialias:!0}));++i);return e}}]),t}()},function(t,e){"use strict";function i(t,e){function i(t,e){var i=a.createShader(t);if(a.shaderSource(i,e),a.compileShader(i),!a.getShaderParameter(i,a.COMPILE_STATUS))throw new Error("compile error: "+a.getShaderInfoLog(i));return i}var r=this,a=this,s=this.createProgram();if(this.attachShader(s,i(this.VERTEX_SHADER,t)),this.attachShader(s,i(this.FRAGMENT_SHADER,e)),this.linkProgram(s),!this.getProgramParameter(s,this.LINK_STATUS))throw new Error("link error: "+this.getProgramInfoLog(s));return this.useProgram(s),s.setAttribLocations=function(t){for(var e=0,i=t.length;e<i;e+=1)s[t[e]]=r.getAttribLocation(s,t[e])},s.setUniformLocations=function(t){for(var e=0,i=t.length;e<i;e+=1)s[t[e]]=r.getUniformLocation(s,t[e])},s}function r(t){var e=this.createBuffer();return this.bindBuffer(this.ARRAY_BUFFER,e),this.bufferData(this.ARRAY_BUFFER,new Float32Array(t),this.STATIC_DRAW),this.bindBuffer(this.ARRAY_BUFFER,null),e}function a(t){var e=this.createBuffer();return this.bindBuffer(this.ELEMENT_ARRAY_BUFFER,e),this.bufferData(this.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),this.STATIC_DRAW),this.bindBuffer(this.ELEMENT_ARRAY_BUFFER,null),e}function s(t){return 0===(t&t-1)}function n(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];this.pixelStorei(this.UNPACK_FLIP_Y_WEBGL,!0);var i=this.createTexture();return this.bindTexture(this.TEXTURE_2D,i),this.texImage2D(this.TEXTURE_2D,0,this.RGBA,this.RGBA,this.UNSIGNED_BYTE,t),s(t.width)&&s(t.height)?(this.generateMipmap(this.TEXTURE_2D),e&&(this.texParameteri(this.TEXTURE_2D,this.TEXTURE_WRAP_S,this.REPEAT),this.texParameteri(this.TEXTURE_2D,this.TEXTURE_WRAP_T,this.REPEAT))):(this.texParameteri(this.TEXTURE_2D,this.TEXTURE_WRAP_S,this.CLAMP_TO_EDGE),this.texParameteri(this.TEXTURE_2D,this.TEXTURE_WRAP_T,this.CLAMP_TO_EDGE),this.texParameteri(this.TEXTURE_2D,this.TEXTURE_MIN_FILTER,this.LINEAR),this.texParameteri(this.TEXTURE_2D,this.TEXTURE_MAG_FILTER,this.LINEAR)),this.bindTexture(this.TEXTURE_2D,null),i}Object.defineProperty(e,"__esModule",{value:!0}),e.makeProgram=i,e.createArrayBufferWithData=r,e.createElementBufferWithData=a,e.isPowerOf2=s,e.createTextureWithData=n},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();e.Matrix4=function(){function t(){i(this,t),this.identity=t.identity()}return r(t,null,[{key:"identity",value:function(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},{key:"copy",value:function(e){var i=t.identity();return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i}},{key:"perspective",value:function(e,i,r,a){var s=1/Math.tan(e/2),n=1/(r-a),o=t.identity();return o[0]=s/i,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(a+r)*n,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*a*r*n,o[15]=0,o}},{key:"orthogonal",value:function(e,i,r,a,s,n){var o=1/(e-i),l=1/(r-a),h=1/(s-n),c=t.identity();return c[0]=-2*o,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*l,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*h,c[11]=0,c[12]=(e+i)*o,c[13]=(a+r)*l,c[14]=(n+s)*h,c[15]=1,c}},{key:"scale",value:function(t,e){var i=e[0],r=e[1],a=e[2];t[0]*=i,t[1]*=i,t[2]*=i,t[3]*=i,t[4]*=r,t[5]*=r,t[6]*=r,t[7]*=r,t[8]*=a,t[9]*=a,t[10]*=a,t[11]*=a}},{key:"translate",value:function(t,e){var i=e[0],r=e[1],a=e[2];return t[12]+=t[0]*i+t[4]*r+t[8]*a,t[13]+=t[1]*i+t[5]*r+t[9]*a,t[14]+=t[2]*i+t[6]*r+t[10]*a,t[15]+=t[3]*i+t[7]*r+t[11]*a,t}},{key:"inverse",value:function(e){var i=e[0],r=e[1],a=e[2],s=e[3],n=e[4],o=e[5],l=e[6],h=e[7],c=e[8],u=e[9],f=e[10],d=e[11],v=e[12],g=e[13],p=e[14],b=e[15],y=i*o-r*n,w=i*l-a*n,x=i*h-s*n,m=r*l-a*o,C=r*h-s*o,S=a*h-s*l,_=c*g-u*v,E=c*p-f*v,A=c*b-d*v,R=u*p-f*g,L=u*b-d*g,P=f*b-d*p,T=y*P-w*L+x*R+m*A-C*E+S*_;if(!T)return null;T=1/T;var M=t.identity();return M[0]=(o*P-l*L+h*R)*T,M[1]=(a*L-r*P-s*R)*T,M[2]=(g*S-p*C+b*m)*T,M[3]=(f*C-u*S-d*m)*T,M[4]=(l*A-n*P-h*E)*T,M[5]=(i*P-a*A+s*E)*T,M[6]=(p*x-v*S-b*w)*T,M[7]=(c*S-f*x+d*w)*T,M[8]=(n*L-o*A+h*_)*T,M[9]=(r*A-i*L-s*_)*T,M[10]=(v*C-g*x+b*y)*T,M[11]=(u*x-c*C-d*y)*T,M[12]=(o*E-n*R-l*_)*T,M[13]=(i*R-r*E+a*_)*T,M[14]=(g*w-v*m-p*y)*T,M[15]=(c*m-u*w+f*y)*T,M}},{key:"rotate",value:function(t,e,i,r){var a,s,n,o,l,h,c,u,f,d,v,g,p,b,y,w,x,m,C,S,_,E,A,R,L=r[0],P=r[1],T=r[2],M=Math.sqrt(L*L+P*P+T*T);return M=1/M,L*=M,P*=M,T*=M,a=Math.sin(i),s=Math.cos(i),n=1-s,o=e[0],l=e[1],h=e[2],c=e[3],u=e[4],f=e[5],d=e[6],v=e[7],g=e[8],p=e[9],b=e[10],y=e[11],w=L*L*n+s,x=P*L*n+T*a,m=T*L*n-P*a,C=L*P*n-T*a,S=P*P*n+s,_=T*P*n+L*a,E=L*T*n+P*a,A=P*T*n-L*a,R=T*T*n+s,t[0]=o*w+u*x+g*m,t[1]=l*w+f*x+p*m,t[2]=h*w+d*x+b*m,t[3]=c*w+v*x+y*m,t[4]=o*C+u*S+g*_,t[5]=l*C+f*S+p*_,t[6]=h*C+d*S+b*_,t[7]=c*C+v*S+y*_,t[8]=o*E+u*A+g*R,t[9]=l*E+f*A+p*R,t[10]=h*E+d*A+b*R,t[11]=c*E+v*A+y*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}},{key:"multiplyMatrices",value:function(e,i){var r=t.identity(),a=e[0],s=e[4],n=e[8],o=e[12],l=e[1],h=e[5],c=e[9],u=e[13],f=e[2],d=e[6],v=e[10],g=e[14],p=e[3],b=e[7],y=e[11],w=e[15],x=i[0],m=i[4],C=i[8],S=i[12],_=i[1],E=i[5],A=i[9],R=i[13],L=i[2],P=i[6],T=i[10],M=i[14],k=i[3],B=i[7],F=i[11],D=i[15];return r[0]=a*x+s*_+n*L+o*k,r[4]=a*m+s*E+n*P+o*B,r[8]=a*C+s*A+n*T+o*F,r[12]=a*S+s*R+n*M+o*D,r[1]=l*x+h*_+c*L+u*k,r[5]=l*m+h*E+c*P+u*B,r[9]=l*C+h*A+c*T+u*F,r[13]=l*S+h*R+c*M+u*D,r[2]=f*x+d*_+v*L+g*k,r[6]=f*m+d*E+v*P+g*B,r[10]=f*C+d*A+v*T+g*F,r[14]=f*S+d*R+v*M+g*D,r[3]=p*x+b*_+y*L+w*k,r[7]=p*m+b*E+y*P+w*B,r[11]=p*C+b*A+y*T+w*F,r[15]=p*S+b*R+y*M+w*D,r}}]),t}()}]);